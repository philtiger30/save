---
# These tasks install Apache and the ruby modules.

- name: Install apache git gcc and ruby etc
  yum: name={{ item }} state=present
  with_items:
   - httpd
   - libcurl-devel
   - httpd-devel
   - ruby
   - ruby-devel
   - apr-devel
   - apr-util-devel
   - rubygems
#   - rubygem-rake
   - zlib
   - zlib-devel
   - openssl-devel
   - git
   - gcc
   - gcc-c++
#   - epel-release
#   ignore_errors: yes
 
#- name: gem install passenger and bundle
#  sudo: no
#  command: gem install {{ item }} 
#  with_items:
#   - passenger
#   - bundle
#  ignore_errors: yes

#- name: install Mod Passenger on Apache2. The compiling could be very slow, please wait several minutes.
#  command: passenger-install-apache2-module -a
#  environment:
#      PATH: "{{ ansible_env.PATH }}:/usr/local/bin"
#  ignore_errors: yes

#- name: Import the Stealthy Monkeys Consultingâ€™s GPG key
#  command: rpm --import http://passenger.stealthymonkeys.com/RPM-GPG-KEY-stealthymonkeys.asc

#- name: Install the release package for Mod Passenger on Apache2
#  command: rpm -Uvh  http://passenger.stealthymonkeys.com/rhel/6/passenger-release.noarch.rpm

#- name: install Mod Passenger on Apache2
#  command: yum install mod_passenger 

- name: http service state
  service: name=httpd state=started enabled=yes

